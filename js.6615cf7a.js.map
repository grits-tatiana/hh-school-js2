{"version":3,"sources":["js/grid.js","js/slider.js","js/templateProduct.js","js/orderForm.js","js/form/phohe.js","js/form/cities.js","js/form/index.js","js/model.js","js/dropdown/productDropdown.js","js/dropdown/controlProductCard.js","js/index.js"],"names":["grid","document","createElement","className","body","appendChild","addEventListener","event","ctrlKey","code","classList","toggle","active","querySelector","showSlide","slideId","slide","contains","add","remove","previous","dataset","parentNode","insertBefore","once","e","data","target","templateDescription","templateSize","getSizes","sizesData","selectorsData","name","email","number","country","delivery","city","address","payment","notice","selectorsProduct","image","sale","price","oldprice","description","sizes","form","close","createOrderForm","choosenSize","product","imageSrc","style","display","window","setTimeout","opacity","overflow","setAttribute","innerHTML","oldPrice","checked","closeForm","field","conditions","validate","value","trim","match","numberError","codeError","error","touched","subscribers","notify","forEach","callback","fields","subscribe","push","filter","item","prepareToSubmit","request","url","fetch","then","res","json","setCities","cities","areas","region","id","selectCities","el","submit","phone","state","invalidFields","Set","showValidation","unsubscribe","preventDefault","console","log","undefined","currentProductDropdown","templateButton","disabled","sizesList","querySelectorAll","choiseSize","sizeId","order","getAttribute","activeProductCard","currentProductCardElement","popularProductsList","dropdownAdd","ind","ev","hasChildNodes","products","dropdownHide","dropdown","firstChild","removeChild","checkClick"],"mappings":"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","file":"js.6615cf7a.js","sourceRoot":"..","sourcesContent":["const grid = document.createElement('div');\r\ngrid.className = 'grid';\r\ndocument.body.appendChild(grid);\r\n\r\ndocument.addEventListener('keydown', (event) => {\r\n    if (event.ctrlKey && event.code === 'KeyG') {\r\n        grid.classList.toggle('grid_visible');\r\n    }\r\n});\r\n","let active = document.querySelector(\".js-slide.slider-content_active\");\r\n\r\nconst showSlide = slideId => {\r\n  const slide = document.querySelector(`.js-slide[data-slide-id=\"${slideId}\"]`);\r\n\r\n  if (slide.classList.contains(\"slider-content_active\")) {\r\n    return;\r\n  }\r\n\r\n  slide.classList.add(\"slider-content_show\");\r\n  active.classList.add(\"slider-content_hide\");\r\n  active.classList.remove(\"slider-content_active\");\r\n  const previous = active;\r\n  active = slide;\r\n\r\n  document\r\n    .querySelector(`.js-slide-button[data-slide-id=\"${slideId}\"]`)\r\n    .classList.add(\"slider-content-block-dots__dot-container_choosen\");\r\n\r\n  document\r\n    .querySelector(\r\n      `.js-slide-button[data-slide-id=\"${previous.dataset.slideId}\"]`\r\n    )\r\n    .classList.remove(\"slider-content-block-dots__dot-container_choosen\");\r\n\r\n  active.addEventListener(      \r\n    \"animationend\",\r\n    () => {\r\n      active.classList.add(\"slider-content_active\");\r\n      active.classList.remove(\"slider-content_show\");\r\n      previous.classList.remove(\"slider-content_hide\");\r\n      active.parentNode.insertBefore(active, previous);\r\n    },\r\n    { once: true }\r\n  );\r\n};\r\n\r\ndocument.querySelector(\".js-slide-buttons\").addEventListener(\"click\", e => {\r\n  const data = e.target.dataset;\r\n  if (!data.slideId) {\r\n    return;\r\n  }\r\n  showSlide(data.slideId);\r\n});","const templateDescription = \r\n'<div class=\"product-card__description\">{description}</div>'\r\n\r\nconst templateSize = \r\n        '<input class=\"js-radio-size\" type=\"radio\" id=\"size_{size}\" data-size-id=\"{size}\" name=\"sizes\">\\\r\n        <div class=\"radio-button-text radio-button-text_size\">\\\r\n            <label class=\"radio-label\" for=\"size_{size}\">{size}</label>\\\r\n        </div>'\r\n\r\nexport const templateButton = \r\n    '<div class=\"dropdown-button-container\">\\\r\n        <button class=\"js-dropdown-button button dropdown-button-container__button\">Заказать</button>\\\r\n    </div>'\r\n\r\nexport function getDescription(product) {\r\n    return templateDescription.replace(/{([a-z]+)}/g, () => {\r\n        return product.description;\r\n    })\r\n}\r\n\r\nexport function getSizes(product) {\r\n    let sizesData = \"\";\r\n    product.sizes.forEach((el) => {\r\n        sizesData += templateSize.replace(/{([a-z]+)}/g, () => {\r\n            return el;\r\n        })\r\n    })\r\n    return sizesData;\r\n}","// Специфическая форма заказа товара\r\nimport {getSizes} from './templateProduct';\r\n\r\nexport const selectorsData = {\r\n    name: \".js-name\",\r\n    email: \".js-email\",\r\n    number: \".js-phone-number\",\r\n    code: \".js-phone-code\",\r\n    country: \".js-phone-country\",\r\n    delivery: \".js-radio-delivery\",\r\n    city: \".js-select-cities\",\r\n    address: \".js-address\",\r\n    payment: \".js-radio-payment\",\r\n    notice: \".js-notice\"\r\n};\r\n\r\nexport const selectorsProduct = {\r\n    image: \".js-order-product-image\",\r\n    sale: \".js-order-product-sale\",\r\n    name: \".js-order-product-name\",\r\n    price: \".js-order-product-price\",\r\n    oldprice: \".js-order-product-oldprice\",\r\n    description: \".js-order-product-description\",\r\n    sizes: \".js-order-product-sizes\"\r\n}\r\n\r\nconst form = document.querySelector(\".js-form\");\r\nconst close = document.querySelector(\".js-close\");\r\nconst image = document.querySelector(selectorsProduct.image);\r\nconst sale = document.querySelector(selectorsProduct.sale);\r\nconst name = document.querySelector(selectorsProduct.name);\r\nconst price = document.querySelector(selectorsProduct.price);\r\nconst oldprice = document.querySelector(selectorsProduct.oldprice);\r\nconst description = document.querySelector(selectorsProduct.description);\r\nconst sizes = document.querySelector(selectorsProduct.sizes);\r\n\r\nexport function createOrderForm(choosenSize, product, imageSrc) {\r\n    form.style.display = \"block\";\r\n    window.setTimeout(function(){\r\n        form.style.opacity = 1;\r\n    },0);\r\n    window.document.body.style.overflow = \"hidden\";\r\n    image.setAttribute(\"src\", imageSrc);\r\n    if (product.sale) {\r\n        sale.classList.remove(\"product-card__sale_none\");\r\n        oldprice.innerHTML = product.oldPrice;\r\n    }\r\n    else sale.classList.add(\"product-card__sale_none\");\r\n    name.innerHTML = product.name;\r\n    price.innerHTML = product.price + \" ₽\";\r\n    description.innerHTML = product.description;\r\n    sizes.innerHTML = getSizes(product);\r\n    form.querySelector(`.js-radio-size[data-size-id=\"${choosenSize}\"]`).checked = true;\r\n}\r\n\r\nfunction closeForm() {\r\n    window.document.body.style.overflow = \"scroll\";\r\n    window.setTimeout(function(){\r\n        form.style.opacity = 0;\r\n    },0);\r\n    form.style.display = \"none\";\r\n  }\r\n  \r\nclose.addEventListener(\"click\", closeForm);\r\n\r\n\r\n","// Здесь специфическая логика, которую мы не можем вынести в field\r\nimport {selectorsData} from '../orderForm'\r\n\r\n  export default function field(form, conditions) {\r\n    const number = form.querySelector(selectorsData.number);\r\n    const code = form.querySelector(selectorsData.code);\r\n    const country = form.querySelector(selectorsData.country);\r\n  \r\n    // общие в field.js и специфические правила можно прокидывать в field\r\n    function validate(field) {\r\n      // required\r\n      if (!field.value.trim()) {\r\n        return \"empty\";\r\n      }\r\n      // => описывается специфическим правилом\r\n      const match = field.value.match(/[0-9\\s]+/);\r\n      if (!match) {\r\n        return \"incorrect character\";\r\n      }\r\n      if (match[0] === field.value) {\r\n        return false;\r\n      }\r\n      return \"incorrect character\";\r\n    }\r\n  \r\n    // => field.js\r\n    let numberError = validate(number);\r\n    let codeError = validate(code);\r\n    let error = numberError || codeError;\r\n    let touched = false;\r\n    let value = {\r\n      number: number.value,\r\n      code: code.value\r\n    };\r\n  \r\n    // простейший PubSub паттерн, можно унести в field.js\r\n    let subscribers = [];\r\n    function subscribe(callback) {\r\n      subscribers.push(callback);\r\n      return () => {\r\n        subscribers = subscribers.filter(item => item !== callback);\r\n      };\r\n    }\r\n    function notify() {\r\n      subscribers.forEach(callback => {\r\n        callback({\r\n          error,\r\n          touched,\r\n          value,\r\n          fields: { number, code, country }\r\n        });\r\n      });\r\n    }\r\n  \r\n    // сохраняем изменения пользователя\r\n    number.addEventListener(\"keyup\", () => {\r\n      touched = true;\r\n      numberError = validate(number);\r\n      error = numberError || codeError;\r\n      value.number = number.value;\r\n      notify();\r\n    });\r\n    code.addEventListener(\"keyup\", () => {\r\n      touched = true;\r\n      codeError = validate(code);\r\n      error = numberError || codeError;\r\n      value.code = code.value;\r\n      notify();\r\n    });\r\n  \r\n    return {\r\n      subscribe,\r\n      error,\r\n      touched,\r\n      value,\r\n      validate: () => {\r\n        numberError = validate(number);\r\n        codeError = validate(code);\r\n        error = numberError || codeError;\r\n        return {\r\n          error,\r\n          touched,\r\n          value,\r\n          fields: { number, code, country }\r\n        };\r\n      },\r\n      prepareToSubmit: () => {\r\n        touched = true;\r\n      },\r\n      fields: { number, code, country }\r\n    };\r\n  }","\r\nfunction request(url) {\r\n    return fetch(url)\r\n        .then(res => { return res.json() })\r\n}\r\n\r\nfunction setCities() {\r\n\r\n    let url = 'https://api.hh.ru/areas/113';\r\n    return request(url)\r\n        .then(country => {\r\n            let cities = [];\r\n            country.areas.forEach((region) => {\r\n                if (region.name === 'Московская область') {\r\n                    region.areas.forEach(city => cities.push({id: city.id, city: city.name}));\r\n                } \r\n                else if (region.name === 'Москва') {\r\n                    cities.push({id: region.id, city: region.name})\r\n                }\r\n            })\r\n    \r\n            let selectCities = '';\r\n            cities.forEach((el) => {\r\n                selectCities += '<option class=\"option\" id=\"'\r\n                + el.id \r\n                + '\"';\r\n                if (el.city === 'Москва') selectCities += ' selected';\r\n                selectCities += '>'\r\n                + el.city +\r\n                '</option>';\r\n            });\r\n\r\n            document\r\n            .querySelector(\".js-select-cities\").innerHTML = selectCities;\r\n            }\r\n        );\r\n}\r\n\r\nsetCities();","import makePhone from './phohe';\r\nimport setCities from './cities';\r\nimport {selectorsData, selectorsProduct} from '../orderForm';\r\n\r\n// Компонент самой формы. \r\n// Общая логика валидации всей формы\r\n\r\nconst form = document.querySelector(\".js-form\");\r\nconst submit = form.querySelector(\".js-submit\");\r\nconst phone = makePhone(form);\r\n\r\nconst state = {\r\n  invalidFields: new Set([\"phone\"])\r\n};\r\n\r\nfunction showValidation({ touched, error, value }) {\r\n  state.phone = value;\r\n  const { number, code, country } = phone.fields;\r\n  if (touched && error) {\r\n    number.classList.add(\"input_error\");\r\n    code.classList.add(\"input_error\");\r\n    country.classList.add(\"input_error\");\r\n\r\n    state.invalidFields.add(\"phone\");\r\n    return;\r\n  }\r\n\r\n  state.invalidFields.remove(\"phone\");\r\n  number.classList.remove(\"input_error\");\r\n  code.classList.remove(\"input_error\");\r\n  country.classList.remove(\"input_error\");\r\n}\r\n\r\nconst unsubscribe = phone.subscribe(showValidation);\r\n\r\nsubmit.addEventListener(\"click\", e => {\r\n  e.preventDefault();\r\n  phone.prepareToSubmit();\r\n  const state = phone.validate();\r\n  if (e) {\r\n    showValidation(state);\r\n  }\r\n\r\n  data = \r\n  console.log()\r\n});\r\n","export default \r\n    [\r\n        {\r\n            id: '1',\r\n            name: 'Зонт',\r\n            image: '/product-1.jpg',\r\n            price: '1 990',\r\n            oldPrice: undefined,\r\n            sale: false,\r\n            description: 'Красный зонт',\r\n            sizes: ['0'],\r\n        },\r\n        {\r\n            id: '2',\r\n            name: 'Сумка',\r\n            image: '/product-2.jpg',\r\n            price: '290',\r\n            oldPrice: undefined,\r\n            sale: false,\r\n            description: 'Красная сумка',\r\n            sizes: ['0'],\r\n        },\r\n        {\r\n            id: '3',\r\n            name: 'Шлепанцы',\r\n            image: '/product-3.jpg',\r\n            price: '790',\r\n            oldPrice: undefined,\r\n            sale: false,\r\n            description: 'Красные шлепанцы',\r\n            sizes: ['37', '38', '39', '40', '41'],\r\n        },\r\n        {\r\n            id: '4',\r\n            name: 'Футболка',\r\n            image: '/product-4.jpg',\r\n            price: '390',\r\n            oldPrice: '690',\r\n            sale: true,\r\n            description: 'Красная хлопковая футболка с&#160;коротким рукавом',\r\n            sizes: ['XS', 'S', 'M', 'L', 'XL', 'XXL'],\r\n        },\r\n        {\r\n            id: '5',\r\n            name: 'Толстовка',\r\n            image: '/product-5.jpg',\r\n            price: '3 990',\r\n            sale: false,\r\n            description: 'Красная толстовка',\r\n            sizes: ['XS', 'S', 'M', 'L', 'XL', 'XXL'],\r\n        },\r\n        {\r\n            id: '6',\r\n            name: 'Подушка',\r\n            image: '/product-6.jpg',\r\n            price: '990',\r\n            sale: false,\r\n            description: 'Красная подушка',\r\n            sizes: ['0'],\r\n        },\r\n    ]\r\n\r\n","import {createOrderForm} from '../orderForm';\r\nimport {getDescription, getSizes, templateButton} from '../templateProduct';\r\n\r\nexport default function (product)\r\n{\r\n    let currentProductDropdown = document.querySelector(`.js-dropdown-product[data-dropdown-id=\"${product.id}\"]`);\r\n    currentProductDropdown.innerHTML = \r\n        getDescription(product) + \r\n        '<div class=\"product-card__sizes\">'\r\n        + getSizes(product) +\r\n        '</div>'\r\n        + templateButton;\r\n    currentProductDropdown.style.opacity = 1;\r\n\r\n    currentProductDropdown.querySelector(\".js-dropdown-button\").disabled = true;\r\n\r\n    let sizesList = document.querySelectorAll(\".js-radio-size\");\r\n    let choosenSize = null;\r\n    function choiseSize(el) {\r\n        return function() {\r\n            currentProductDropdown.querySelector(\".js-dropdown-button\").disabled = false;\r\n            choosenSize = el.dataset.sizeId;\r\n        }\r\n    }\r\n\r\n    sizesList.forEach( (el) => {\r\n        el.addEventListener(\"click\", choiseSize(el));\r\n    })\r\n\r\n    currentProductDropdown.querySelector(\".js-dropdown-button\").addEventListener(\"click\", order);\r\n\r\n    function order() {\r\n        let image = document.querySelector(`.js-popular-product[data-product-id=\"${product.id}\"] img`).getAttribute(\"src\");\r\n        createOrderForm(choosenSize, product, image);\r\n    }\r\n}","import products from \"../model\";\r\nimport productDropdown from \"./productDropdown\";\r\n\r\nlet activeProductCard = null;\r\nlet currentProductCardElement = null;\r\n\r\nlet popularProductsList = document.querySelectorAll(\".js-popular-product\");\r\n\r\nfunction dropdownAdd(el, ind, ev) {\r\n    return function() {\r\n        if (ev === 'click') { \r\n            activeProductCard = ind;\r\n        }\r\n        if ((activeProductCard === null && ev === 'hover') \r\n            || (ev === 'click')) {\r\n            let dropdown = el.querySelector(\".js-dropdown-product\");\r\n            if (!(dropdown.hasChildNodes())) {\r\n                productDropdown(products[ind]);\r\n                document\r\n                .querySelector(`.product-card[data-product-id=\"${ind + 1}\"]`)\r\n                .classList.add(\"product-card_dropdown\");\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction dropdownHide(el, ind, ev) {\r\n    return function() {\r\n        if ((activeProductCard !== ind && ev === 'hover') || (ev === 'click')) {\r\n            let dropdown = el.querySelector(\".js-dropdown-product\");\r\n            if (dropdown.hasChildNodes()) {\r\n                while (dropdown.firstChild) {\r\n                    dropdown.removeChild(dropdown.firstChild);\r\n                }\r\n                dropdown.style.opacity = 0;\r\n                document\r\n                .querySelector(`.product-card[data-product-id=\"${ind + 1}\"]`)\r\n                .classList.remove(\"product-card_dropdown\");\r\n            }\r\n        }\r\n        if (activeProductCard === ind && ev === 'click') {\r\n            currentProductCardElement = null;\r\n            activeProductCard = null;\r\n        }\r\n    }\r\n}\r\n\r\npopularProductsList.forEach( (el, ind) => {\r\n    el.addEventListener(\"click\", dropdownAdd(el,ind, 'click'));\r\n    el.addEventListener(\"mouseenter\", dropdownAdd(el,ind, 'hover')); \r\n    el.addEventListener(\"mouseleave\", dropdownHide(el,ind, 'hover'));\r\n})\r\n\r\nfunction checkClick(event) {\r\n    currentProductCardElement = document.querySelector(`.product-card[data-product-id=\"${activeProductCard + 1}\"]`);\r\n    if (!(currentProductCardElement.contains(event.target))) {\r\n        dropdownHide(currentProductCardElement, activeProductCard, 'click')();\r\n    }\r\n}\r\n\r\nwindow.addEventListener(\"click\", checkClick, true);","import \"./grid\";\r\nimport \"./slider\";\r\nimport \"./form\";\r\nimport \"./dropdown/controlProductCard\";"]}